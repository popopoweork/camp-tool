{"ast":null,"code":"import axios from\"axios\";import{useCallback,useState}from\"react\";export default function UseMyEquipments(){console.log('init use');const[myEquipments,setMyEquipments]=useState();const updateMyEquipments=useCallback(async()=>{console.log('real updateMyEquipments');axios.get(\"https://api.github.com/repos/chinheki/pwa-test/issues/1/comments\",{headers:{Accept:\"application/vnd.github+json\",Authorization:\"Bearer \".concat(process.env.REACT_APP_ISSUE_TOKEN),\"X-GitHub-Api-Version\":\"2022-11-28\"}}).catch(e=>{alert(\"get good list error\");console.log(e);}).then(r=>{console.log(r);const equipmentList=[];r.data.map(comment=>{var _comment$body;if(!!((_comment$body=comment.body)!==null&&_comment$body!==void 0&&_comment$body.length)){const context=JSON.parse(comment.body);context.id=\"\".concat(comment.id);equipmentList.push(context);}});console.log(equipmentList);setMyEquipments({equipmentList});});},[setMyEquipments]);return{myEquipments,updateMyEquipments};}","map":{"version":3,"names":["axios","useCallback","useState","UseMyEquipments","console","log","myEquipments","setMyEquipments","updateMyEquipments","get","headers","Accept","Authorization","concat","process","env","REACT_APP_ISSUE_TOKEN","catch","e","alert","then","r","equipmentList","data","map","comment","_comment$body","body","length","context","JSON","parse","id","push"],"sources":["/Users/bytedance/projects/camp-tool/src/utils/use-my-equipments.ts"],"sourcesContent":["import axios from \"axios\";\nimport { useCallback, useState } from \"react\";\nimport { MyEquipments, Equipment } from './types';\n\n\nexport default function UseMyEquipments() {\n  console.log('init use')\n  const [myEquipments, setMyEquipments] = useState<MyEquipments>();\n\n  const updateMyEquipments = useCallback(async () => {\n    console.log('real updateMyEquipments')\n    axios\n      .get(\"https://api.github.com/repos/chinheki/pwa-test/issues/1/comments\", {\n        headers: {\n          Accept: \"application/vnd.github+json\",\n          Authorization: `Bearer ${process.env.REACT_APP_ISSUE_TOKEN}`,\n          \"X-GitHub-Api-Version\": \"2022-11-28\",\n        },\n      })\n      .catch((e) => {\n        alert(\"get good list error\");\n        console.log(e);\n      })\n      .then((r:any) => {\n        console.log(r);\n        const equipmentList:Equipment[]=[]\n        r.data.map((comment:any)=>{\n          if(!!comment.body?.length){\n            const context=JSON.parse(comment.body) as Equipment;\n            context.id=`${comment.id}`\n            equipmentList.push(context)\n          }\n        })\n        console.log(equipmentList)\n        setMyEquipments({ equipmentList });\n      });\n  },[setMyEquipments])\n\n  return {\n    myEquipments,\n    updateMyEquipments,\n  };\n}\n"],"mappings":"AAAA,MAAO,CAAAA,KAAK,KAAM,OAAO,CACzB,OAASC,WAAW,CAAEC,QAAQ,KAAQ,OAAO,CAI7C,cAAe,SAAS,CAAAC,eAAeA,CAAA,CAAG,CACxCC,OAAO,CAACC,GAAG,CAAC,UAAU,CAAC,CACvB,KAAM,CAACC,YAAY,CAAEC,eAAe,CAAC,CAAGL,QAAQ,CAAe,CAAC,CAEhE,KAAM,CAAAM,kBAAkB,CAAGP,WAAW,CAAC,SAAY,CACjDG,OAAO,CAACC,GAAG,CAAC,yBAAyB,CAAC,CACtCL,KAAK,CACFS,GAAG,CAAC,kEAAkE,CAAE,CACvEC,OAAO,CAAE,CACPC,MAAM,CAAE,6BAA6B,CACrCC,aAAa,WAAAC,MAAA,CAAYC,OAAO,CAACC,GAAG,CAACC,qBAAqB,CAAE,CAC5D,sBAAsB,CAAE,YAC1B,CACF,CAAC,CAAC,CACDC,KAAK,CAAEC,CAAC,EAAK,CACZC,KAAK,CAAC,qBAAqB,CAAC,CAC5Bf,OAAO,CAACC,GAAG,CAACa,CAAC,CAAC,CAChB,CAAC,CAAC,CACDE,IAAI,CAAEC,CAAK,EAAK,CACfjB,OAAO,CAACC,GAAG,CAACgB,CAAC,CAAC,CACd,KAAM,CAAAC,aAAyB,CAAC,EAAE,CAClCD,CAAC,CAACE,IAAI,CAACC,GAAG,CAAEC,OAAW,EAAG,KAAAC,aAAA,CACxB,GAAG,CAAC,GAAAA,aAAA,CAACD,OAAO,CAACE,IAAI,UAAAD,aAAA,WAAZA,aAAA,CAAcE,MAAM,EAAC,CACxB,KAAM,CAAAC,OAAO,CAACC,IAAI,CAACC,KAAK,CAACN,OAAO,CAACE,IAAI,CAAc,CACnDE,OAAO,CAACG,EAAE,IAAAnB,MAAA,CAAIY,OAAO,CAACO,EAAE,CAAE,CAC1BV,aAAa,CAACW,IAAI,CAACJ,OAAO,CAAC,CAC7B,CACF,CAAC,CAAC,CACFzB,OAAO,CAACC,GAAG,CAACiB,aAAa,CAAC,CAC1Bf,eAAe,CAAC,CAAEe,aAAc,CAAC,CAAC,CACpC,CAAC,CAAC,CACN,CAAC,CAAC,CAACf,eAAe,CAAC,CAAC,CAEpB,MAAO,CACLD,YAAY,CACZE,kBACF,CAAC,CACH"},"metadata":{},"sourceType":"module","externalDependencies":[]}